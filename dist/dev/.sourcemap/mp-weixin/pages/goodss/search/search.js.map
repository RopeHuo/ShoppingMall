{"version":3,"sources":["webpack:///./src/main.js","webpack:///./src/pages/goodss/search/search.vue?e654","webpack:///./src/pages/goodss/search/search.vue?de52","webpack:///./src/pages/goodss/search/search.vue?f8d6","webpack:///./src/pages/goodss/search/search.vue?60b4","webpack:///./src/pages/goodss/search/search.vue","webpack:///./src/pages/goodss/search/search.vue?7e56"],"names":["createPage","Page","component","options","__file","render","_h","this","$createElement","_self","_c","staticRenderFns","_withStripped","createNamespacedHelpers","mapState","data","private_info","private_brand_info","private_sort_info","brand","is_brand_open","current","tags_id","sort","is_sort_open","sort_current","sort_brand_id","private_search_info","req_search_info_page","no_data","search_input","isImg","components","SortList","onLoad","e","Number","req_search_info","BRAND_INFO","url","$api","apiUrl","POST_QUERY_BRAND","num","then","res","slice","sort_list","uni","showShareMenu","withShareTicket","onReachBottom","onNavigationBarSearchInputChanged","search_text","search_button","onNavigationBarButtonTap","search_dataInfo","methods","mapActions","$request","POST","POST_BRAND_LIBRARY_QUERY","brand_id","cate_id","goods_name","page","text","open","_name","brand_info","sort_info","brand_choice","index","event","title","parseInt","currentTarget","dataset","id","SEARCH_INFO","length","concat","SORT_LIST","POST_QUERY_CLASSIFICATION","goodsInfo","navigateTo","search_btn","splice"],"mappings":"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","file":"pages/goodss/search/search.js","sourcesContent":["import 'uni-pages';\n\nimport Vue from 'vue'            \nimport Page from './pages/goodss/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=20bc6141&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/Rope/master/Desktop/mix-mall/cli_ShoppingMall/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('20bc6141')) {\n      api.createRecord('20bc6141', component.options)\n    } else {\n      api.reload('20bc6141', component.options)\n    }\n    module.hot.accept(\"./search.vue?vue&type=template&id=20bc6141&\", function () {\n      api.rerender('20bc6141', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/goodss/search/search.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=20bc6141&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { createNamespacedHelpers } from 'vuex';\nimport SortList from '@/components/SortList/SortList';\n\nconst { mapState, mapActions } = createNamespacedHelpers('storeCommodity');\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t...mapState(['brand_info', 'sort_info']),\n\t\t\tprivate_info: {\n\t\t\t\tprivate_brand_info: [],\n\t\t\t\tprivate_sort_info: []\n\t\t\t},\n\t\t\tbrand: {\n\t\t\t\tis_brand_open: false,\n\t\t\t\tcurrent: null,\n\t\t\t\tbrand: 0\n\t\t\t},\n\t\t\ttags_id:0,\n\t\t\tsort: {\n\t\t\t\tis_sort_open: false,\n\t\t\t\tsort_current: null,\n\t\t\t\tsort_brand_id: 0\n\t\t\t},\n\t\t\tprivate_search_info: [],\n\t\t\treq_search_info_page: 1,\n\t\t\tno_data: true,\n\t\t\tsearch_input:\"\",\n\t\t\tisImg:false,\n\t\t};\n\t},\n\tcomponents: {\n\t\tSortList\n\t},\n\tonLoad(e) {\n\t\tthis.tags_id = e.tags_id ? Number(e.tags_id) : 0;\n\t\tthis.req_search_info(); // 第一次加载页面数据\n\t\tthis.BRAND_INFO({\n\t\t\turl: this.$api.apiUrl.POST_QUERY_BRAND,\n\t\t\tdata: {\n\t\t\t\ttags_id: this.tags_id,\n\t\t\t\tnum: 200\n\t\t\t}\n\t\t}).then(res => {\n\t\t\tthis.private_info.private_brand_info = res.data.slice(0, 8);\n\t\t});\n\t\tthis.sort_list();\n\t\t// 可分享当前页面\n\t\tuni.showShareMenu({\n\t\t\twithShareTicket:true,\n\t\t});\n\t},\n\tonReachBottom() {\n\t\t// 触底事件发生后请求新数据\n\t\tif (this.no_data) {\n\t\t\tthis.req_search_info_page++;\n\t\t\tthis.req_search_info();\n\t\t} else {\n\t\t\t// 函数截流如果no_data为假代表请求的数据已经没有或不足够了\n\t\t\treturn false;\n\t\t}\n\t},\n\tonNavigationBarSearchInputChanged(search_text){this.search_button(search_text)},\n\tonNavigationBarButtonTap(){this.search_dataInfo();},\n\tmethods: {\n\t\t...mapActions(['SEARCH_INFO', 'BRAND_INFO', 'SORT_LIST']),\n\t\tsearch_dataInfo() {\n\t\t\t//点击搜索请求数据，方便做多端兼容\n\t\t\tthis.$request.POST({\n\t\t\t\turl:this.$api.apiUrl.POST_BRAND_LIBRARY_QUERY,\n\t\t\t\tdata:{\n\t\t\t\t\ttags_id: this.tags_id,\n\t\t\t\t\tbrand_id: this.brand.brand_id,\n\t\t\t\t\tcate_id: this.sort.sort_brand_id,\n\t\t\t\t\tgoods_name: this.search_input,\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tnum: 10\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tthis.private_search_info = res.data\n\t\t\t})\n\t\t},\n\t\tsearch_button(search_text) {\n\t\t\t//点击搜索获取输入框内容\n\t\t\tthis.search_input = search_text.text\n\t\t},\n\t\topen(data) {\n\t\t\tswitch (data._name) {\n\t\t\t\tcase '品牌':\n\t\t\t\t\tif (this.brand.is_brand_open === false) {\n\t\t\t\t\t\t// 没有打开更多的时候被点击，就去全局state中拿到值全部赋过去\n\t\t\t\t\t\tthis.private_info.private_brand_info = this.brand_info();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 如果已经打开更多，再点击就截取数据的前8项\n\t\t\t\t\t\tthis.private_info.private_brand_info = this.brand_info().slice(0, 8);\n\t\t\t\t\t}\n\t\t\t\t\t// 每次都取反\n\t\t\t\t\tthis.brand.is_brand_open = !this.brand.is_brand_open;\n\t\t\t\t\tbreak;\n\t\t\t\tcase '分类':\n\t\t\t\t\tif (this.sort.is_sort_open === false) {\n\t\t\t\t\t\tthis.private_info.private_sort_info = this.sort_info();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.private_info.private_sort_info = this.sort_info().slice(0, 8);\n\t\t\t\t\t}\n\t\t\t\t\tthis.sort.is_sort_open = !this.sort.is_sort_open;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tbrand_choice(data) {\n\t\t\tconst { index, event, title } = data;\n\t\t\t// 判断是那一个分类被点击了，让他们操作各自的打他值\n\t\t\tif (title === '品牌') {\n\t\t\t\tif (this.brand.current === index) {\n\t\t\t\t\t// 如果点击的是当前被选择元素\n\t\t\t\t\tthis.brand.current = null;\n\t\t\t\t\tthis.brand.brand_id = 0;\n\t\t\t\t} else {\n\t\t\t\t\t// 获取点击对象，方便给当前元素添加class\n\t\t\t\t\tthis.brand.current = index;\n\t\t\t\t\t// 获取点击id\n\t\t\t\t\tthis.brand.brand_id = parseInt(event.currentTarget.dataset.id);\n\t\t\t\t}\n\t\t\t\t// 只要品牌被点击了，就消除并重新加载分类的数据\n\t\t\t\tthis.sort.sort_current = null;\n\t\t\t\tthis.sort.sort_brand_id = 0;\n\t\t\t\tthis.sort_list();\n\t\t\t} else if (title === '分类') {\n\t\t\t\tif (this.sort.sort_current === index) {\n\t\t\t\t\tthis.sort.sort_current = null;\n\t\t\t\t\tthis.sort.sort_brand_id = 0;\n\t\t\t\t} else {\n\t\t\t\t\tthis.sort.sort_current = index;\n\t\t\t\t\tthis.sort.sort_brand_id = parseInt(event.currentTarget.dataset.id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// 不管两个谁被点击都会执行如下方法，使页面回到初始值\n\t\t\tthis.req_search_info_page = 1;\n\t\t\tthis.private_search_info = [];\n\t\t\tthis.no_data = true;\n\t\t\tthis.req_search_info();\n\t\t},\n\t\treq_search_info() {\n\t\t\t// 加载页面数据函数\n\t\t\tthis.SEARCH_INFO({\n\t\t\t\turl: this.$api.apiUrl.POST_BRAND_LIBRARY_QUERY,\n\t\t\t\tdata: {\n\t\t\t\t\ttags_id: this.tags_id,\n\t\t\t\t\tbrand_id: this.brand.brand_id,\n\t\t\t\t\tcate_id: this.sort.sort_brand_id,\n\t\t\t\t\tnum: 10,\n\t\t\t\t\tpage: this.req_search_info_page,\n\t\t\t\t\tgoods_name: this.search_input\n\t\t\t\t},\n\t\t\t}).then(res => {\n\t\t\t\tif (res) {\n\t\t\t\t\t// 如果你请求返回的数据长度不够10条就显示没有更多数据\n\t\t\t\t\tif (res.data.length < 10) {\n\t\t\t\t\t\tthis.no_data = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.private_search_info = this.private_search_info.concat(res.data);\n\t\t\t\t\t// 如果返回有数据，关闭指定图片\n\t\t\t\t\tthis.isImg = false;\n\t\t\t\t} else {\n\t\t\t\t\t// 如果返回为空就是没有任何数据，显示指定图片\n\t\t\t\t\tthis.isImg = true;\n\t\t\t\t\t// this.no_data = false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsort_list() {\n\t\t\t// 获取分类列表数据\n\t\t\tthis.SORT_LIST({\n\t\t\t\turl: this.$api.apiUrl.POST_QUERY_CLASSIFICATION,\n\t\t\t\tdata: {\n\t\t\t\t\ttags_id: this.tags_id,\n\t\t\t\t\tbrand_id: this.brand.brand_id,\n\t\t\t\t\tnum: 200\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tthis.private_info.private_sort_info = res.data.slice(0, 8);\n\t\t\t});\n\t\t},\n\t\tgoodsInfo(id) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/goodss/product/product?id=${id}`\n\t\t\t});\n\t\t},\n\t\tsearch_btn(){\n\t\t\tthis.private_search_info.splice(0,this.private_search_info.length);\n\t\t\tthis.req_search_info();\n\t\t}\n\t}\n};\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}