(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mys/user/user"],{"33ec":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("a34a")),r=a("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,a,n,r,i,s){try{var o=t[i](s),c=o.value}catch(u){return void a(u)}o.done?e(c):Promise.resolve(c).then(n,r)}function o(t){return function(){var e=this,a=arguments;return new Promise(function(n,r){var i=t.apply(e,a);function o(t){s(i,n,r,o,c,"next",t)}function c(t){s(i,n,r,o,c,"throw",t)}o(void 0)})}}function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(a,!0).forEach(function(e){m(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l=(0,r.createNamespacedHelpers)("storeCommodity"),g=l.mapState,p=l.mapMutations,h={data:function(){return u({},g(["isWrapShow"]),{isAuth:!1,userInfoObj:{},orderList:[],order_status:[{img_url:"".concat(this.$imgUrl,"/images/myct_indentl_grey__01.png"),text:"待付款",state:1,num:0},{img_url:"".concat(this.$imgUrl,"/images/myct_indentl_grey__03.png"),text:"待发货",state:2,num:0},{img_url:"".concat(this.$imgUrl,"/images/myct_indentl_grey__05.png"),text:"待收货",state:3,num:0},{img_url:"".concat(this.$imgUrl,"/images/myct_indentl_grey__07.png"),text:"待评价",state:4,num:0},{img_url:"".concat(this.$imgUrl,"/images/myct_indentl_grey__09.png"),text:"退换货",state:5,num:0}],my_wallet_item:[{num:"--",text:"余额"},{num:0,text:"积分"},{num:0,text:"优惠卷"},{num:0,text:"银行卡管理"}],other_functions:[{img_url:"".concat(this.$imgUrl,"/images/myct_others_i_red_01.png"),txt:"商品收藏"},{img_url:"".concat(this.$imgUrl,"/images/myct_others_i_red_13.png"),txt:"拼团频道"},{img_url:"".concat(this.$imgUrl,"/images/myct_others_i_red_19.png"),txt:"客服"},{img_url:"".concat(this.$imgUrl,"/images/myct_others_i_red_06.png"),txt:"帮助中心"}],employeeFunction:[{img_url:"".concat(this.$imgUrl,"/images/icon-partner-red-pic1.png"),text:"店铺列表",url:"/pages/mys/storelist/storelist"},{img_url:"".concat(this.$imgUrl,"/images/icon-salesman-red-pic2.png"),text:"品牌审核",url:"/pages/mys/storebrandlist/storebrandlist"},{img_url:"".concat(this.$imgUrl,"/images/icon-salesman-red-pic3.png"),text:"店铺榜单",url:"/pages/mys/storetop/storetop"},{img_url:"".concat(this.$imgUrl,"/images/icon-salesman-red-pic4.png"),text:"邀请入驻",url:"/pages/shares/index/index"}],grade:"",salesmanData:{kprice:0,month_price:0,shop_num:0,today_num:0,today_price:0,total_price:0,week_price:0},avatar:""})},onShow:function(){this.navToLogin()},computed:u({},g(["userInfo"]),{dataStatistics:function(){return[{num:this.salesmanData.shop_num,text:"店铺数量"},{num:this.salesmanData.today_price,text:"今日销售额"},{num:this.salesmanData.week_price,text:"近7天销售额"},{num:this.salesmanData.month_price,text:"近30天销售额"}]},todayDeal:function(){return[{num:this.salesmanData.today_num,text:"今日成交件数"},{num:this.salesmanData.kprice,text:"今日客单价"}]}}),methods:u({},p(["changeWrapShow"]),{navTo:function(e){t.navigateTo({url:"/pages/mys/order/order?state=".concat(e.state)})},jumpLogin:function(){"VIP1"===this.grade?t.navigateTo({url:"/pages/mys/info/info?userInfo"}):t.navigateTo({url:"/pages/mys/salesmaninfo/salesmaninfo"})},iconNum:function(){if(this.orderList)for(var t=0;t<this.orderList.length;t++)for(var e=this.orderList[t],a=0;a<this.order_status.length;a++){var n=this.order_status[a];e.status===n.state&&this.$set(this.order_status[a],"num",e.num)}},navToLogin:function(){var e=this,a=t.getStorageSync("access_token");a?(this.changeWrapShow({isWrapShow:!0}),this.reqUserInfo()):this.isWrapShow()?t.switchTab({url:"/pages/indexs/index/index",success:function(){e.changeWrapShow({isWrapShow:!1})}}):t.navigateTo({url:"/pages/mys/login/login",success:function(){e.changeWrapShow({isWrapShow:!0})}})},reqUserInfo:function(){var t=o(n.default.mark(function t(){var e;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.checkoutUser();case 2:e=t.sent,e&&this.reqUserInfoCore();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),reqUserInfoCore:function(){var e=this;this.$request.GET({url:this.$api.apiUrl.GET_USER_INFO}).then(function(a){var n=a.data;"salesman"!==n.rule?(1===n.type&&4===e.other_functions.length&&e.other_functions.push({img_url:"".concat(e.$imgUrl,"/images/myct_others_i_red_21.png"),txt:"合伙人后台"}),t.setStorageSync("storage_salesman",""),e.reqUserOrder()):e.$request.GET({url:e.$api.apiUrl.GET_V6_USER_INFO}).then(function(a){var n=a.data;"SECCUSS"===a.code&&(n.nickname?e.$set(e.userInfoObj,"nickname",n.nickname):e.$set(e.userInfoObj,"nickname",n.mobile),n.avatar?e.avatar=n.avatar+"?"+Date.now():e.avatar="https://meizi.manogue.com.cn/static/wap/images/myct_hd.png",e.grade="业务员",t.setStorageSync("storage_salesman","true"),e.reqSalesmanData())})})},checkoutUser:function(){var e=this,a=t.getStorageSync("storage_salesman"),n=t.getStorageSync("access_token");if(!a)return!0;this.$request.POST({url:this.$api.apiUrl.POST_V6_USER_CHECKTOKEN,data:{token:n}}).then(function(a){"SECCUSS"!==a.code?(t.setStorageSync("storage_salesman",""),t.setStorageSync("access_token",""),t.navigateTo({url:"/pages/mys/login/login"})):e.reqUserInfoCore()})},reqSalesmanData:function(){var e=this,a=t.getStorageSync("access_token");this.$request.GET({url:this.$api.apiUrl.GET_V6_SHOP_FINANCE,data:{token:a}}).then(function(t){var a=t.data[0];for(var n in a)a[n]?e.salesmanData[n]=a[n]:e.salesmanData[n]=0})},reqUserOrder:function(){var t=this;this.$request.GET({url:this.$api.apiUrl.GET_USER_ORDER}).then(function(e){t.userInfoObj=e.data.infomation,e.data.infomation.avatar?t.avatar=e.data.infomation.avatar+"?"+Date.now():t.avatar="https://meizi.manogue.com.cn/static/wap/images/myct_hd.png",t.grade="VIP1",t.orderList=e.data.order,t.iconNum()}),this.$request.GET({url:this.$api.apiUrl.GET_USER_AUTH_STATUS}).then(function(e){200!==e.code?t.isAuth=!0:t.isAuth=!1})},toAppointPage:function(e){switch(e){case"客服":t.navigateTo({url:"/pages/goodss/wolive/wolive"});break;case"合伙人后台":t.navigateTo({url:"/pages/mys/brokeragenew/brokeragenew"});break;case"推广有礼":t.navigateTo({url:"/pages/shares/index/index"});default:break}}})};e.default=h}).call(this,a("543d")["default"])},"39d8":function(t,e,a){"use strict";a.r(e);var n=a("6dd7"),r=a("bc9b");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("8992");var s=a("2877"),o=Object(s["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=o.exports},"557e":function(t,e,a){"use strict";(function(t){a("6cdc");n(a("66fd"));var e=n(a("39d8"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"6dd7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=(t._self._c,t.isWrapShow());t.$mp.data=Object.assign({},{$root:{m0:a}})},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},8992:function(t,e,a){"use strict";var n=a("a8e3"),r=a.n(n);r.a},a8e3:function(t,e,a){},bc9b:function(t,e,a){"use strict";a.r(e);var n=a("33ec"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a}},[["557e","common/runtime","common/vendor"]]]);